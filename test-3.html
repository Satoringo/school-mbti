<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>診断 3/4｜すくタイプ16</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="wrap">
    <header class="badge">
      <span class="dot"></span> 診断 3 / 4（G / M）
    </header>

    <section class="card">
      <h2>現実派 / 想像派 チェック</h2>
      <p class="mini">考え方に近いほうを選んでね（6問）</p>
    </section>

    <div id="qWrap" class="grid"></div>

    <div class="cta">
      <button id="nextBtn" class="btn primary" disabled>あと 6 問</button>
      <a class="btn secondary" href="test-2.html">← 戻る</a>
    </div>
  </div>

  <script>
    const questions = [
      { text:"授業の理解は…", A:"具体例があると分かりやすい", B:"イメージで掴むほう", pointA:"G", pointB:"M" },
      { text:"興味を持つ基準は…", A:"役に立つかどうか", B:"面白そうかどうか", pointA:"G", pointB:"M" },
      { text:"レポートや作品は…", A:"手順通り進めたい", B:"感性でアレンジしたい", pointA:"G", pointB:"M" },
      { text:"話題にしがちなのは…", A:"現実的な話", B:"ひらめき・空想", pointA:"G", pointB:"M" },
      { text:"得意になりやすいのは…", A:"具体系（理・数など）", B:"感性系（国語・音楽など）", pointA:"G", pointB:"M" },
      { text:"考える順番は…", A:"現実から組み立てる", B:"発想してから形にする", pointA:"G", pointB:"M" },
    ];

    const KEY="smbti_score_v1";
    const score = JSON.parse(localStorage.getItem(KEY) || '{"G":0,"M":0}');
    const wrap=document.getElementById("qWrap");
    let answered=0;

    questions.forEach((q,i)=>{
      const d=document.createElement("div");
      d.className="card";
      d.innerHTML=`
        <h3>Q${i+13}. ${q.text}</h3>
        <div class="cta">
          <button class="btn primary">A. ${q.A}</button>
          <button class="btn secondary">B. ${q.B}</button>
        </div>`;
      const [a,b]=d.querySelectorAll("button");
      const lock=()=>{
        a.disabled=true; b.disabled=true;
        answered++;
        document.getElementById("nextBtn").textContent =
          answered>=6 ? "次へ（4 / 4）" : `あと ${6-answered} 問`;
        if(answered>=6){
          document.getElementById("nextBtn").disabled=false;
        }
      };
      a.onclick=()=>{ score[q.pointA]=(score[q.pointA]||0)+1; localStorage.setItem(KEY,JSON.stringify(score)); lock(); };
      b.onclick=()=>{ score[q.pointB]=(score[q.pointB]||0)+1; localStorage.setItem(KEY,JSON.stringify(score)); lock(); };
      wrap.appendChild(d);
    });

    document.getElementById("nextBtn").onclick=()=>{
      location.href="test-4.html";
    };
  </script>
</body>
</html>
