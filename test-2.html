<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>診断 2/4｜すくタイプ16</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="wrap">
    <header class="badge">
      <span class="dot"></span> 診断 2 / 4（T / W）
    </header>

    <section class="card">
      <h2>きちんと / ゆらぎ チェック</h2>
      <p class="mini">ふだんの行動に近いほうを選んでね（6問）</p>
    </section>

    <div id="qWrap" class="grid"></div>

    <div class="cta">
      <button id="nextBtn" class="btn primary" disabled>あと 6 問</button>
      <a class="btn secondary" href="test-1.html">← 戻る</a>
    </div>
  </div>

  <script>
    const questions = [
      { text:"宿題は…", A:"早めに終わらせたい", B:"締切前に一気にやる", pointA:"T", pointB:"W" },
      { text:"ノートの見た目は…", A:"わりと整理されている", B:"気分でバラバラ", pointA:"T", pointB:"W" },
      { text:"テスト勉強は…", A:"計画を立てて進める", B:"やる気が出た時に集中", pointA:"T", pointB:"W" },
      { text:"カバンの中身は…", A:"必要な物が揃っている", B:"とりあえず詰め込みがち", pointA:"T", pointB:"W" },
      { text:"スケジュール管理は…", A:"だいたい把握している", B:"その日の気分次第", pointA:"T", pointB:"W" },
      { text:"提出物は…", A:"余裕をもって出す", B:"ギリギリになりがち", pointA:"T", pointB:"W" },
    ];

    const KEY="smbti_score_v1";
    const score = JSON.parse(localStorage.getItem(KEY) || '{"T":0,"W":0}');
    const wrap=document.getElementById("qWrap");
    let answered=0;

    questions.forEach((q,i)=>{
      const d=document.createElement("div");
      d.className="card";
      d.innerHTML=`
        <h3>Q${i+7}. ${q.text}</h3>
        <div class="cta">
          <button class="btn primary">A. ${q.A}</button>
          <button class="btn secondary">B. ${q.B}</button>
        </div>`;
      const [a,b]=d.querySelectorAll("button");
      const lock=()=>{
        a.disabled=true; b.disabled=true;
        answered++;
        document.getElementById("nextBtn").textContent =
          answered>=6 ? "次へ（3 / 4）" : `あと ${6-answered} 問`;
        if(answered>=6){
          document.getElementById("nextBtn").disabled=false;
        }
      };
      a.onclick=()=>{ score[q.pointA]=(score[q.pointA]||0)+1; localStorage.setItem(KEY,JSON.stringify(score)); lock(); };
      b.onclick=()=>{ score[q.pointB]=(score[q.pointB]||0)+1; localStorage.setItem(KEY,JSON.stringify(score)); lock(); };
      wrap.appendChild(d);
    });

    document.getElementById("nextBtn").onclick=()=>{
      location.href="test-3.html";
    };
  </script>
</body>
</html>
