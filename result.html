<!-- result.html ã€œå­¦æ ¡ç”Ÿæ´»S-MBTI çµæœãƒšãƒ¼ã‚¸ï¼ˆ16ã‚¿ã‚¤ãƒ—åˆ¤å®šï¼‹ã‚·ã‚§ã‚¢ï¼‰ã€œ -->
<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="robots" content="index,follow" />
  <title>è¨ºæ–­çµæœï½œã™ãã‚¿ã‚¤ãƒ—16</title>
  <meta name="description" content="å­¦æ ¡ç”Ÿæ´»S-MBTIï¼ˆã™ãã‚¿ã‚¤ãƒ—16ï¼‰ã®è¨ºæ–­çµæœãƒšãƒ¼ã‚¸ã€‚ã‚ãªãŸã®å­¦æ ¡ç”Ÿæ´»ã‚¿ã‚¤ãƒ—ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚" />

  <!-- OGPï¼ˆã‚·ã‚§ã‚¢ç”¨ï¼šç”»åƒã¯å¾Œã§å·®ã—æ›¿ãˆOKï¼‰ -->
  <meta property="og:title" content="ã™ãã‚¿ã‚¤ãƒ—16ï½œå­¦æ ¡ç”Ÿæ´»MBTIè¨ºæ–­ çµæœ" />
  <meta property="og:description" content="ã‚ãªãŸã®å­¦æ ¡ç”Ÿæ´»ã‚¿ã‚¤ãƒ—ã¯â€¦ï¼Ÿ 24å•ã§è¨ºæ–­ï¼" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="" />
  <meta property="og:image" content="" />
  <meta name="twitter:card" content="summary_large_image" />

  <style>
    :root{
      --bg:#FFF9F2;
      --card:#ffffff;
      --text:#333333;
      --muted:#6B6B6B;
      --pink:#FF8BA7;
      --mint:#9BFFC7;
      --yell:#FFE79B;
      --shadow: 0 10px 25px rgba(0,0,0,.08);
      --radius:18px;
      --radius2:14px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Hiragino Kaku Gothic ProN", "Noto Sans JP", "Yu Gothic", "Meiryo", sans-serif;
      color:var(--text);
      background:
        radial-gradient(800px 350px at 10% 0%, rgba(255,139,167,.25), transparent 60%),
        radial-gradient(650px 320px at 95% 10%, rgba(155,255,199,.25), transparent 60%),
        radial-gradient(600px 300px at 50% 100%, rgba(255,231,155,.25), transparent 60%),
        var(--bg);
      min-height:100vh;
    }
    a{color:inherit}
    .wrap{
      max-width: 820px;
      margin: 0 auto;
      padding: 18px 14px 40px;
    }
    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding: 10px 4px 14px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      font-weight:800; letter-spacing:.3px;
    }
    .badge{
      display:inline-flex; align-items:center; justify-content:center;
      width:34px; height:34px;
      border-radius: 999px;
      background: linear-gradient(135deg, var(--pink), var(--mint));
      box-shadow: var(--shadow);
      color:#fff;
      font-weight:900;
    }
    .brand small{display:block; font-weight:700; color:var(--muted); letter-spacing:0}
    .btn{
      border:0;
      border-radius: 999px;
      padding: 12px 14px;
      font-weight:800;
      cursor:pointer;
      transition: transform .06s ease, filter .15s ease;
      box-shadow: var(--shadow);
      background: var(--card);
    }
    .btn:active{transform: translateY(1px)}
    .btnPrimary{
      background: linear-gradient(135deg, var(--pink), #FFB4C6);
      color:#fff;
    }
    .btnMint{
      background: linear-gradient(135deg, var(--mint), #D6FFE9);
      color:#165a35;
    }
    .btnRow{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-top: 14px;
    }
    .card{
      background: rgba(255,255,255,.88);
      border: 1px solid rgba(255,255,255,.65);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .hero{
      padding: 18px 16px;
    }
    .kicker{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(255,139,167,.12);
      border: 1px solid rgba(255,139,167,.22);
      color:#9b2543;
      font-weight:800;
      font-size: 13px;
    }
    .h1{
      margin: 12px 0 6px;
      font-size: 22px;
      line-height:1.25;
      letter-spacing: .2px;
    }
    .code{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-weight: 900;
      font-size: 18px;
      margin: 6px 0 2px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(155,255,199,.18);
      border: 1px solid rgba(155,255,199,.35);
    }
    .desc{
      margin: 10px 0 0;
      color: var(--text);
      font-size: 15px;
      line-height: 1.7;
    }
    .muted{
      color: var(--muted);
      font-size: 13px;
      line-height: 1.6;
    }
    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin-top: 12px;
    }
    @media(min-width:740px){
      .grid{grid-template-columns: 1fr 1fr;}
      .h1{font-size: 26px;}
    }
    .miniCard{
      padding: 14px 14px;
      border-radius: var(--radius2);
      background: rgba(255,255,255,.8);
      border: 1px solid rgba(255,255,255,.65);
      box-shadow: 0 8px 16px rgba(0,0,0,.06);
    }
    .miniTitle{
      font-weight: 900;
      margin:0 0 6px;
      display:flex;
      align-items:center;
      gap:8px;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding: 4px 10px;
      border-radius: 999px;
      font-weight: 900;
      font-size: 12px;
      background: rgba(255,231,155,.28);
      border: 1px solid rgba(255,231,155,.55);
    }
    .toast{
      position: fixed;
      left: 50%;
      bottom: 16px;
      transform: translateX(-50%);
      background: rgba(51,51,51,.92);
      color:#fff;
      padding: 10px 14px;
      border-radius: 999px;
      font-size: 13px;
      opacity:0;
      pointer-events:none;
      transition: opacity .2s ease;
      max-width: calc(100% - 24px);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .toast.show{opacity:1}
    .error{
      border: 1px solid rgba(255,139,167,.35);
      background: rgba(255,139,167,.10);
      color:#7d1231;
      padding: 12px 12px;
      border-radius: var(--radius2);
      margin-top: 12px;
      font-weight: 800;
    }
    footer{
      margin-top: 18px;
      padding: 10px 4px 0;
      color: var(--muted);
      font-size: 12px;
    }
    footer a{color: var(--muted); text-decoration: underline;}
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand" aria-label="ã‚µã‚¤ãƒˆå">
        <div class="badge">16</div>
        <div>
          <div>ã™ãã‚¿ã‚¤ãƒ—16</div>
          <small>å­¦æ ¡ç”Ÿæ´»MBTIè¨ºæ–­</small>
        </div>
      </div>
      <button class="btn" id="btnRetry" type="button" title="ã‚‚ã†ä¸€å›è¨ºæ–­ã™ã‚‹">ã‚‚ã†ä¸€å›</button>
    </div>

    <main class="card hero" aria-live="polite">
      <div class="kicker">ğŸ“ è¨ºæ–­çµæœ</div>

      <div class="h1" id="title">èª­ã¿è¾¼ã¿ä¸­â€¦</div>
      <div class="code" id="codePill" style="display:none;">CODE</div>

      <p class="desc" id="desc"></p>

      <div class="btnRow" id="shareRow" style="display:none;">
        <button class="btn btnPrimary" id="btnShare" type="button">ã‚·ã‚§ã‚¢</button>
        <button class="btn btnMint" id="btnX" type="button">Xã§æŠ•ç¨¿</button>
        <button class="btn" id="btnCopy" type="button">ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼</button>
      </div>

      <div class="error" id="errorBox" style="display:none;"></div>
      <p class="muted" style="margin-top:12px;">
        â€»ã“ã®è¨ºæ–­ã¯å­¦æ ¡ç”Ÿæ´»ã®å‚¾å‘ã‚’â€œã‚†ã‚‹ãâ€æ¥½ã—ã‚€ãŸã‚ã®ã‚‚ã®ã§ã™â—
      </p>
    </main>

    <section class="grid" aria-label="ã‚¿ã‚¤ãƒ—ã®ãƒ’ãƒ³ãƒˆ">
      <div class="miniCard">
        <div class="miniTitle">ğŸ§© 4æ–‡å­—ã‚³ãƒ¼ãƒ‰ã®è¦‹æ–¹ <span class="pill">ã‚ªãƒªã‚¸ãƒŠãƒ«</span></div>
        <div class="muted">
          1æ–‡å­—ç›®ï¼šSï¼ˆç¤¾äº¤ï¼‰/ Cï¼ˆè½ã¡ç€ãï¼‰<br>
          2æ–‡å­—ç›®ï¼šTï¼ˆãã¡ã‚“ã¨ï¼‰/ Wï¼ˆã‚†ã‚‹ã‚ï¼‰<br>
          3æ–‡å­—ç›®ï¼šGï¼ˆç¾å®Ÿï¼‰/ Mï¼ˆã²ã‚‰ã‚ãï¼‰<br>
          4æ–‡å­—ç›®ï¼šLï¼ˆå­¦ã³ï¼‰/ Rï¼ˆã‚¢ã‚¯ãƒ†ã‚£ãƒ–ï¼‰
        </div>
      </div>

      <div class="miniCard">
        <div class="miniTitle">ğŸ’¡ ã‚·ã‚§ã‚¢ã®ã‚³ãƒ„ <span class="pill">ã‹ã‚“ãŸã‚“</span></div>
        <div class="muted">
          å‹ã ã¡ã¨çµæœã‚’è¦‹ã›åˆã†ã¨ç››ã‚Šä¸ŠãŒã‚‹â—<br>
          ã€Œãƒªãƒ³ã‚¯ã‚³ãƒ”ãƒ¼ã€â†’LINEã‚„DMã«è²¼ã‚‹ã®ãŒã„ã¡ã°ã‚“æ‰‹è»½ï¼
        </div>
      </div>
    </section>

    <footer>
      <div>Â© <span id="year"></span> ã™ãã‚¿ã‚¤ãƒ—16</div>
      <div style="margin-top:6px;">
        <a href="./privacy.html">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a> ãƒ»
        <a href="./terms.html">åˆ©ç”¨è¦ç´„</a>
      </div>
    </footer>
  </div>

  <div class="toast" id="toast">ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼</div>

  <script>
    // =========================
    // 16ã‚¿ã‚¤ãƒ—å®šç¾©ï¼ˆæ—¥æœ¬èªã®ã¿ï¼‰
    // =========================
    const TYPE_DATA = {
      STGL: { name: "ã‚¯ãƒ©ã‚¹ã®å¤ªé™½â—", emoji: "ğŸŒ", desc: "æ˜ã‚‹ãã¦å‹é”ãŒå¤šã„ã®ã«ã€ã‚„ã‚‹ã“ã¨ã‚‚ã¡ã‚ƒã‚“ã¨ã‚„ã‚Œã‚‹å®‰å®šã‚¹ã‚¿ãƒ¼ã€‚æ•™å®¤ã®ç©ºæ°—ã‚’ãƒ‘ãƒƒã¨æ˜ã‚‹ãã™ã‚‹å­˜åœ¨â—" },
      STGR: { name: "ã‚¢ã‚¯ãƒ†ã‚£ãƒ–å§”å“¡é•·â—", emoji: "ğŸƒâ€â™€ï¸", desc: "è¡Œäº‹ã‚‚å‹‰å¼·ã‚‚å…¨åŠ›ã€‚é ¼ã‚‰ã‚Œã‚‹ã¨ç‡ƒãˆã‚‹ãƒªãƒ¼ãƒ€ãƒ¼ã‚¿ã‚¤ãƒ—ã€‚å‹•ããªãŒã‚‰å ´ã‚’ã¾ã¨ã‚ã‚‹ã®ãŒå¾—æ„â—" },
      SWGL: { name: "ã‚®ãƒªã‚®ãƒªãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ£ãƒ¼â—", emoji: "â°", desc: "æ™®æ®µã¯ã‚†ã‚‹ã‚ã ã‘ã©ã€ç· åˆ‡å‰ã«ä¸€æ°—ã«é›†ä¸­ã—ã¦ä»•ä¸Šã’ã‚‹ã‚¿ã‚¤ãƒ—ã€‚æœ€å¾Œã«å¼·ã„â€œè¿½ã„è¾¼ã¿åŠ›â€ã®æŒã¡ä¸»â—" },
      SWGR: { name: "ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ã‚¿ãƒ¼â—", emoji: "ğŸ‰", desc: "æ¥½ã—ã•æœ€å„ªå…ˆã®è‡ªç”±äººã€‚æ–‡åŒ–ç¥­ãƒ»ä½“è‚²ç¥­ãªã©â€œã¿ã‚“ãªã§å‹•ãæ—¥â€ã§ä¸€ç•ªè¼ãâ—" },

      STML: { name: "ã²ã‚‰ã‚ããƒ—ãƒ¬ã‚¼ãƒ³ç‹â—", emoji: "ğŸ¤", desc: "ã‚¢ã‚¤ãƒ‡ã‚¢ã¨è¡¨ç¾åŠ›ãŒå¼·ã„ã‚¿ã‚¤ãƒ—ã€‚ç™ºè¡¨ã‚„ä¼ç”»ã§ã‚¹ãƒãƒƒãƒˆãƒ©ã‚¤ãƒˆãŒå½“ãŸã‚Šã‚„ã™ã„â—" },
      STMR: { name: "ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–å…ˆè¼©â—", emoji: "ğŸ¨", desc: "ç™ºæƒ³åŠ›ï¼‹è¡Œå‹•åŠ›ã®ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã€‚ä½œå“ã¥ãã‚Šã‚„ä¼ç”»ã”ã¨ã§å­˜åœ¨æ„ŸãŒãƒãƒ„ã‚°ãƒ³â—" },
      SWML: { name: "ã‚®ãƒªã‚®ãƒªå¤©æ‰â—", emoji: "ğŸ§ ", desc: "æ°—åˆ†å±‹ã ã‘ã©æœ¬ç•ªã§å¼·ã„ã€‚ã€ãˆã€ã„ã¤å‹‰å¼·ã—ãŸã®ï¼Ÿã€ã£ã¦è¨€ã‚ã‚ŒãŒã¡ãªè¬ã®å®ŸåŠ›è€…â—" },
      SWMR: { name: "ãƒ ãƒ¼ãƒ‰ãƒ¡ãƒ¼ã‚«ãƒ¼â—", emoji: "âœ¨", desc: "ã‚ã„ã‚ã„ãŒå¤§å¥½ãã€‚å ´ã®ç©ºæ°—ã‚’ä¸€ç¬ã§æ˜ã‚‹ãã™ã‚‹æ‰èƒ½ãŒã‚ã‚‹â—" },

      CTGL: { name: "é™ã‹ãªã‚‹å„ªç­‰ç”Ÿâ—", emoji: "ğŸ“š", desc: "ã‚³ãƒ„ã‚³ãƒ„ç©ã¿ä¸Šã’ã‚‹å®‰å¿ƒæ ã€‚å®¿é¡Œã¯æ—©ã‚ã«çµ‚ã‚ã‚‰ã›ã¦ã€å­¦ã³ã‚’å®‰å®šã•ã›ã‚‹ã‚¿ã‚¤ãƒ—â—" },
      CTGR: { name: "çœŸé¢ç›®ã‚¹ãƒãƒ¼ãƒ„ãƒãƒ³â—", emoji: "ğŸ…", desc: "èª å®Ÿã§ã¾ã£ã™ãã€‚éƒ¨æ´»ã‚‚å‹‰å¼·ã‚‚åŠªåŠ›ã§çµæœã‚’ã¤ã‹ã‚€ã‚¿ã‚¤ãƒ—ã€‚ä¿¡é ¼ã•ã‚Œã‚„ã™ã„â—" },
      CWGL: { name: "ãƒã‚¤ãƒšãƒ¼ã‚¹ç ”ç©¶è€…â—", emoji: "ğŸ”", desc: "èˆˆå‘³ã®ã‚ã‚‹ã“ã¨ã«æ·±ãæ²¡é ­ã™ã‚‹ã‚¿ã‚¤ãƒ—ã€‚å›³æ›¸å®¤ã‚„è‡ªç¿’ã®æ™‚é–“ãŒè½ã¡ç€ãâ—" },
      CWGR: { name: "é™ã‹ãªè¦³å¯Ÿè€…â—", emoji: "ğŸ‘€", desc: "å‘¨ã‚Šã‚’ã‚ˆãè¦‹ã¦ã„ã¦æ°—æŒã¡ã«æ•æ„Ÿã€‚æ§ãˆã‚ã ã‘ã©èŠ¯ãŒã—ã£ã‹ã‚Šã—ã¦ã‚‹â—" },

      CTML: { name: "å›³æ›¸å®¤ãƒ—ãƒªãƒ³ã‚¹â—", emoji: "ğŸ“–", desc: "é›†ä¸­åŠ›ã¨æ„Ÿæ€§ã®ãƒãƒ©ãƒ³ã‚¹ãŒè‰¯ã„ã‚¿ã‚¤ãƒ—ã€‚é™ã‹ãªå ´æ‰€ã§ã˜ã‚ã˜ã‚åŠ›ã‚’å‡ºã™â—" },
      CTMR: { name: "ã»ã‚ã»ã‚ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼â—", emoji: "ğŸ«§", desc: "ã‚»ãƒ³ã‚¹ç§‘ç›®ãŒå¼·ã‚ã€‚ã‚„ã•ã—ã„ç©ºæ°—ã§ä½œå“ã‚„ä¼ç”»ã«â€œã‹ã‚ã„ã„å‘³â€ã‚’è¶³ã›ã‚‹â—" },
      CWML: { name: "çœã‚¨ãƒè³¢è€…â—", emoji: "ğŸ§©", desc: "æœ€å°ã®åŠ›ã§æœ€å¤§ã®çµæœã‚’ç‹™ã†ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆæ´¾ã€‚åŠ¹ç‡ã®è‰¯ã•ãŒæ­¦å™¨â—" },
      CWMR: { name: "å†…å‘ã‚¢ã‚¤ãƒ‰ãƒ«â—", emoji: "ğŸŒ·", desc: "é™ã‹ã‚ã ã‘ã©ä»²è‰¯ããªã‚‹ã¨å¯æ„›ã•å¤§çˆ†ç™ºã€‚å°‘äººæ•°ã§ã®äººæ°—ãŒå¼·ã„â—" }
    };

    // =========================
    // åˆ¤å®šï¼šã‚¹ã‚³ã‚¢ or typeæŒ‡å®š
    // =========================
    function parseTypeFromQuery() {
      const url = new URL(location.href);
      const t = (url.searchParams.get("type") || "").toUpperCase().trim();
      return TYPE_DATA[t] ? t : "";
    }

    function loadScoresFromStorage() {
      // 1) ã‚‚ã£ã¨ã‚‚ç°¡å˜ï¼šã‚¿ã‚¤ãƒ—ã‚’ç›´æ¥ä¿å­˜
      const savedType = (localStorage.getItem("smbti_type") || "").toUpperCase().trim();
      if (TYPE_DATA[savedType]) return { type: savedType, scores: null };

      // 2) ã‚¹ã‚³ã‚¢ä¿å­˜ï¼š {S,C,T,W,G,M,L,R}
      const raw = localStorage.getItem("smbti_scores");
      if (!raw) return { type: "", scores: null };
      try {
        const s = JSON.parse(raw);
        return { type: typeFromScores(s), scores: s };
      } catch {
        return { type: "", scores: null };
      }
    }

    function typeFromScores(s) {
      // æœªå®šç¾©ã§ã‚‚0æ‰±ã„
      const S = Number(s?.S || 0), C = Number(s?.C || 0);
      const T = Number(s?.T || 0), W = Number(s?.W || 0);
      const G = Number(s?.G || 0), M = Number(s?.M || 0);
      const L = Number(s?.L || 0), R = Number(s?.R || 0);

      let code = "";
      code += (S >= C) ? "S" : "C";
      code += (T >= W) ? "T" : "W";
      code += (G >= M) ? "G" : "M";
      code += (L >= R) ? "L" : "R";
      return TYPE_DATA[code] ? code : "";
    }

    // =========================
    // ã‚·ã‚§ã‚¢
    // =========================
    function buildShareUrl(typeCode) {
      const url = new URL(location.href);
      url.searchParams.set("type", typeCode);
      return url.toString();
    }

    function buildShareText(typeCode) {
      const d = TYPE_DATA[typeCode];
      return `ã€ã™ãã‚¿ã‚¤ãƒ—16ã€‘ç§ã®å­¦æ ¡ç”Ÿæ´»ã‚¿ã‚¤ãƒ—ã¯ã€Œ${d.emoji} ${d.name}ï¼ˆ${typeCode}ï¼‰ã€ã§ã—ãŸâ—\n#ã™ãã‚¿ã‚¤ãƒ—16 #å­¦æ ¡ç”Ÿæ´»MBTI`;
    }

    function toast(msg) {
      const el = document.getElementById("toast");
      el.textContent = msg;
      el.classList.add("show");
      setTimeout(() => el.classList.remove("show"), 1400);
    }

    async function copyText(text) {
      try {
        await navigator.clipboard.writeText(text);
        toast("ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼ã—ãŸã‚ˆâ—");
      } catch {
        // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
        const ta = document.createElement("textarea");
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        ta.remove();
        toast("ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼ã—ãŸã‚ˆâ—");
      }
    }

    // =========================
    // è¡¨ç¤º
    // =========================
    function render(typeCode) {
      const ogUrl = document.querySelector('meta[property="og:url"]');
      if (ogUrl) ogUrl.setAttribute("content", buildShareUrl(typeCode));

      const t = TYPE_DATA[typeCode];
      document.getElementById("title").textContent = `${t.emoji} ã‚ãªãŸã¯ã€Œ${t.name}ã€`;
      const pill = document.getElementById("codePill");
      pill.style.display = "inline-flex";
      pill.textContent = `ã‚³ãƒ¼ãƒ‰ï¼š${typeCode}`;

      document.getElementById("desc").textContent = t.desc;

      // ã‚·ã‚§ã‚¢UI
      document.getElementById("shareRow").style.display = "flex";

      const shareUrl = buildShareUrl(typeCode);
      const shareText = buildShareText(typeCode);

      // Web Shareï¼ˆå¯¾å¿œç«¯æœ«ãªã‚‰ã“ã‚ŒãŒæœ€å¼·ï¼‰
      document.getElementById("btnShare").onclick = async () => {
        if (navigator.share) {
          try {
            await navigator.share({ title: "ã™ãã‚¿ã‚¤ãƒ—16ï½œè¨ºæ–­çµæœ", text: shareText, url: shareUrl });
          } catch {
            // ã‚­ãƒ£ãƒ³ã‚»ãƒ«ç­‰ã¯ç„¡è¦–
          }
        } else {
          // éå¯¾å¿œãªã‚‰ãƒªãƒ³ã‚¯ã‚³ãƒ”ãƒ¼ã«å¯„ã›ã‚‹
          await copyText(shareUrl);
        }
      };

      // XæŠ•ç¨¿
      document.getElementById("btnX").onclick = () => {
        const xUrl = new URL("https://twitter.com/intent/tweet");
        xUrl.searchParams.set("text", shareText);
        xUrl.searchParams.set("url", shareUrl);
        window.open(xUrl.toString(), "_blank", "noopener,noreferrer");
      };

      // ãƒªãƒ³ã‚¯ã‚³ãƒ”ãƒ¼
      document.getElementById("btnCopy").onclick = async () => {
        await copyText(shareUrl);
      };
    }

    function renderError(msg) {
      document.getElementById("title").textContent = "çµæœã‚’è¡¨ç¤ºã§ããªã‹ã£ãŸâ€¦";
      document.getElementById("desc").textContent = "";
      const box = document.getElementById("errorBox");
      box.style.display = "block";
      box.textContent = msg;

      // ã‚‚ã†ä¸€å›ãƒœã‚¿ãƒ³ã ã‘ã¯ä½¿ãˆã‚‹ã‚ˆã†ã«
      document.getElementById("shareRow").style.display = "none";
      document.getElementById("codePill").style.display = "none";
    }

    // =========================
    // åˆæœŸåŒ–
    // =========================
    (function init(){
      document.getElementById("year").textContent = new Date().getFullYear();

      // ã€Œã‚‚ã†ä¸€å›ã€å°ç·šï¼ˆè¨ºæ–­ãƒšãƒ¼ã‚¸åã¯å¥½ãã«å¤‰æ›´OKï¼‰
      document.getElementById("btnRetry").onclick = () => {
        // ä¾‹ï¼šè¨ºæ–­1ãƒšãƒ¼ã‚¸ç›®ã‚’ quiz-1.html ã«ã—ã¦ã„ã‚‹å ´åˆ
        location.href = "./quiz-1.html";
      };

      // 1) URLæŒ‡å®šãŒã‚ã‚Œã°ãã‚Œæœ€å„ªå…ˆï¼ˆã‚·ã‚§ã‚¢ã§é–‹ã„ãŸæ™‚ç”¨ï¼‰
      const typeFromQuery = parseTypeFromQuery();
      if (typeFromQuery) {
        render(typeFromQuery);
        return;
      }

      // 2) localStorageã‹ã‚‰å¾©å…ƒ
      const { type } = loadScoresFromStorage();
      if (type && TYPE_DATA[type]) {
        render(type);
        return;
      }

      // 3) ã©ã‚Œã‚‚ãªã‘ã‚Œã°æ¡ˆå†…
      renderError("è¨ºæ–­çµæœãŒè¦‹ã¤ã‹ã‚‰ãªã„ã‚ˆâ— å…ˆã«è¨ºæ–­ï¼ˆ24å•ï¼‰ã‚’ã‚„ã£ã¦ã¿ã¦ã­ï¼");
    })();
  </script>
</body>
</html>
